<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的升级之路</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css"/>
    <link rel="stylesheet" href="pages/myRoadNew/myRoadNew.css">
</head>
<body>
    <div class="app">
        <div class="container app-bg">
            <div class="z_box">
                <ul class="z_box_ul">
                    <!--<li class="">-->
                        <!--<div class="li_box">-->
                            <!--<h3 class="h3c">合作商户合伙人</h3>-->
                            <!--<p>开通费3650</p>-->
                            <!--<div class="li_box_text disn">-->
                                <!--30%开通转介绍提成，直接推荐合伙人商户次年始980元/年的系统维护费中，提取180元/年。可交19800参加“智享课堂”（终身复训）。-->
                            <!--</div>-->
                            <!--<span class="li_box_span">展开<i></i></span>-->
                        <!--</div>-->
                        <!--<s></s>-->
                        <!--<em></em>-->
                        <!--<div class="text_box lh64 f4b ">-->
                            <!--<p>回款30万</p>-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li class="">-->
                        <!--<div class="li_box">-->
                            <!--<h3 class="h3c">市级代理合伙人</h3>-->
                            <!--<p>开通费5万</p>-->
                            <!--<div class="li_box_text disn">-->
                                <!--40%开通转介绍提成，直接推荐合伙人商户次年始980元/年的系统维护费中，提取280元/年。-->
                                <!--赠 40家3650元的合作商家开通收益，及19800元的“智享课堂”（终身复训）。-->
                            <!--</div>-->
                            <!--<span class="li_box_span">展开<i></i></span>-->
                        <!--</div>-->
                        <!--<s></s>-->
                        <!--<em></em>-->
                        <!--<div class="text_box lh64 f16">-->
                            <!--<p>回款50万</p>-->
                        <!--</div>-->

                        <!--&lt;!&ndash;<div class="percent_box">&ndash;&gt;-->
                            <!--&lt;!&ndash;<p>已完成40%<br>20万</p>&ndash;&gt;-->
                        <!--&lt;!&ndash;</div>&ndash;&gt;-->

                    <!--</li>-->
                    <!--<li>-->
                        <!--<div class="li_box">-->
                            <!--<h3 class="h3c">省级代理合伙人</h3>-->
                            <!--<p>开通费10万</p>-->
                            <!--<div class="li_box_text disn">-->
                                <!--50%开通转介绍 提成，直接推荐合伙人商户次年始980元/年的系统维护费中，提取380元/年。赠100家3650元的合作商家开通收益，及19800元的“智享课堂”（终身复训）。-->
                            <!--</div>-->
                            <!--<span class="li_box_span">展开<i></i></span>-->
                        <!--</div>-->
                        <!--<s></s>-->
                        <!--<em></em>-->
                        <!--<div class="text_box lh64 f58">-->
                            <!--<p>回款80万</p>-->
                        <!--</div>-->


                    <!--</li>-->
                    <!--&lt;!&ndash;女人花基地智享事业部&ndash;&gt;-->
                    <!--<li>-->
                        <!--<div class="li_box">-->
                            <!--<h3 class="h3c">女人花事业部</h3>-->
                            <!--<p>开通费28万</p>-->
                            <!--<div class="li_box_text disn">-->
                                <!--65%开通转介绍提成，直接推荐合伙人商户次年始980元/年系统维护费中提取480元/年，赠200家3650元合作商家开通收益，及19800元的“智享课堂”（终身复训）。-->
                            <!--</div>-->
                            <!--<span class="li_box_span">展开<i></i></span>-->
                        <!--</div>-->
                        <!--<s></s>-->
                        <!--<em></em>-->
                        <!--<div class="text_box lh32 f25c h68">-->
                            <!--<p>发展5家<br>女人花事业部</p>-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<div class="li_box">-->
                            <!--<h3 class="h3c">运营中心合伙人</h3>-->
                            <!--<p>累计直接、间接开发有5家“女人花事业部”</p>-->
                            <!--<div class="li_box_text disn">-->
                                <!--累计直接、间接开发有5家“女人花事业部”，即转为“运营中心合伙人”。-->
                                <!--直接或间接开发的合伙人商户按2折跟总部结算，直接推荐合伙人商户次年始980元/年系统维护费中提取480元/年，赠200家3650元合作商家开通收益，及19800元的“智享课堂”（终身复训）。-->
                            <!--</div>-->
                            <!--<span class="li_box_span">展开<i></i></span>-->
                        <!--</div>-->
                        <!--<s></s>-->
                        <!--<em></em>-->
                        <!--<div class="text_box lh32 fd8 h68">-->
                            <!--<p>发展5家<br>运营中心</p>-->
                        <!--</div>-->
                    <!--</li>-->


                    <!--<li>-->
                        <!--<div class="li_box">-->
                            <!--<h3 class="h3c">智享平台分公司</h3>-->
                            <!--<p>发展5家以上的“运营中心”</p>-->
                            <!--<div class="li_box_text disn">-->
                                <!--累计直接、间接开发的统一运营的“合伙人市场网络”，出现5家以上的“运营中心”，即可自愿同智享总部联合成立独立的“互联网科技发展有限公司”，即“智享总部”分公司，由智享总部占股51%，原团队占股49%。-->
                                <!--直接或间接开发的合伙人商户按1折跟总部结算，直接推荐合伙人商户次年始980元/年系统维护费中提取480元/年，赠200家3650元合作商家开通收益，及19800元的“智享课堂”（终身复训）。-->
                            <!--</div>-->
                            <!--<span class="li_box_span">展开<i></i></span>-->
                        <!--</div>-->
                        <!--<s></s>-->
                    <!--</li>-->
                </ul>
            </div>
        </div>
    </div>
</body>
<script src="js/jquery.min.js"></script>
<script src="assets/layer/layer.js"></script>
<script src="js/util.js"></script><script>
    $(function(){
        var TOTAL={
            percent:0,
            step:0,
            total0:300000,
        }
        var USER_URL={
            WAYTOUP:'user/wayToUpgrade'//获取升级之路的信息
        }
        var params={
            merchantId:GetQueryString('merchantId'),
            userId:GetQueryString('userId')
        }
        reqAjaxAsync(USER_URL.WAYTOUP,JSON.stringify(params)).done(function (res) {
            if(res.code ==1){
                var data = res.data;
                var lists = data.chargeLevelTypeList;
                console.log(res.data);
                var str = ``;
                var className = ['f4b','f16','f58','f25c h68','fd8 h68']

                for (var i = 0; i < lists.length; i++) {
                    var obj = lists[i];
                    var obj1 = lists[i-1];
                    if(obj.upgradingType == 1){
                        str+=`<li class="">
                            <div class="li_box">
                                <h3 class="h3c">${obj.levelName}</h3>
                                <p>开通费${obj.amount}</p>
                                <div class="li_box_text">
                                    ${obj.description}
                                </div>
                                <!--<span class="li_box_span">展开<i></i></span>-->
                            </div>
                            <s></s>
                            <em></em>
                            <div class="text_box lh64 ${className[i]}">
                            <p>回款${obj.upgradingConditions/10000}万</p>
                            </div>
                        </li>`
                    }else if(obj.upgradingType == 2){ //发展多少家

                        str+=`<li class="">
                            <div class="li_box">
                                <h3 class="h3c">${obj.levelName}</h3>`
                                if(obj.amount == 0){
                                    str+= `<p>累计直接、间接开发有${obj.upgradingConditions}家“${obj.upgradingConditionsName}”</p>`
                                }else{
                                    str+= ` <p>开通费${obj.amount}</p>`
                                }



                                 str+= `<div class="li_box_text">
                                    ${obj.description}
                                </div>
                                <!--<span class="li_box_span">展开<i></i></span>-->
                            </div>
                            <s></s>
                            <em></em>
                             <div class="text_box lh32 ${className[i]}">
                            <p>发展${obj.upgradingConditions}家<br>${obj.upgradingConditionsName}</p>
                            </div>
                        </li>`
                    }else if(obj.upgradingType == 3){
                        str+=`<li class="">
                            <div class="li_box">
                                <h3 class="h3c">${obj.levelName}</h3>
                                <p>发展5家以上的“运营中心”</p>
                                <div class="li_box_text">
                                    ${obj.description}
                                </div>
                                <!--<span class="li_box_span">展开<i></i></span>-->
                            </div>
                            <s></s>
                            <em></em>
                        </li>`
                    }

                }
                $('.z_box_ul').html(str);
                TOTAL.percent = data.percentage*100;//进行的百分比
                TOTAL.step = data.merchantLevel.orgLevel;//第几级
                var lists = $('.z_box_ul').find('li');
                var str = ``;
                switch(true)
                {
                    case (TOTAL.step<=4):
                        str =  `<div class="percent_box"><p>已完成${TOTAL.percent.toFixed(2)}%<br>${(data.completionNum/10000).toFixed(2)}万</p></div>`
                        break;
                    case (TOTAL.step === 5):
                        str =  `<div class="percent_box" style="left:-25vw;"><p>已发展${data.completionNum}家<br>女人花事业部</p></div>`;
                        break;
                    case(TOTAL.step === 6):
                        str =  `<div class="percent_box" style="left:-25vw;"><p>已发展${data.completionNum}家<br>运营中心合伙人</p></div>`;
                        break
                    default:

                }
                $.each(lists,function (index, item) {

                    if(index+2<= TOTAL.step){
                        $(item).addClass('active');
                        $(item).find('em').css({
                            height:'100%'
                        })
                        if(index+2 === TOTAL.step){
                            $(item).find('em').css({
                                height:TOTAL.percent+'%'
                            }).after(str)
                        }
                    }
                    console.log(index)
                })

            }
        })
    })
    $('body').on('click','.li_box_span',function () {
        var str = ''
        if($(this).find('i').hasClass('iclick')){
            $(this).html('展开<i></i>')
            $(this).find('i').removeClass('iclick');
        }else{
            $(this).html('收起<i></i>')
            $(this).find('i').addClass('iclick');

        }
        $(this).prev().slideToggle('normal');
        $(this).parents('li').siblings().find('div.li_box_text').slideUp().next().html('展开<i></i>').removeClass('iclick');
        var h = $('.z_box').height();
//        $('.z_box_ul:after').css({
//            height:h*0.4+0.2+'vw'
//        })

    })
</script>
</html>